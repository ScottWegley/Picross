var me=Object.defineProperty;var be=(t,e,n)=>e in t?me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>be(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function P(){}function he(t){return t()}function le(){return Object.create(null)}function E(t){t.forEach(he)}function ge(t){return typeof t=="function"}function Y(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function _e(t){return Object.keys(t).length===0}function d(t,e){t.appendChild(e)}function D(t,e,n){t.insertBefore(e,n||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function ve(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function G(t){return document.createTextNode(t)}function R(){return G(" ")}function C(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t){return t===""?null:+t}function ye(t){return Array.from(t.childNodes)}function j(t,e){t.value=e??""}function F(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function N(t,e,n){t.classList.toggle(e,!!n)}function Ce(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}let A;function L(t){A=t}function we(){if(!A)throw new Error("Function called outside component initialization");return A}function $e(){const t=we();return(e,n,{cancelable:s=!1}={})=>{const l=t.$$.callbacks[e];if(l){const i=Ce(e,n,{cancelable:s});return l.slice().forEach(r=>{r.call(t,i)}),!i.defaultPrevented}return!0}}const B=[],re=[];let k=[];const oe=[],He=Promise.resolve();let q=!1;function Re(){q||(q=!0,He.then(pe))}function K(t){k.push(t)}const V=new Set;let x=0;function pe(){if(x!==0)return;const t=A;do{try{for(;x<B.length;){const e=B[x];x++,L(e),Pe(e.$$)}}catch(e){throw B.length=0,x=0,e}for(L(null),B.length=0,x=0;re.length;)re.pop()();for(let e=0;e<k.length;e+=1){const n=k[e];V.has(n)||(V.add(n),n())}k.length=0}while(B.length);for(;oe.length;)oe.pop()();q=!1,V.clear(),L(t)}function Pe(t){if(t.fragment!==null){t.update(),E(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}function Ee(t){const e=[],n=[];k.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),k=e}const z=new Set;let Se;function J(t,e){t&&t.i&&(z.delete(t),t.i(e))}function ue(t,e,n,s){if(t&&t.o){if(z.has(t))return;z.add(t),Se.c.push(()=>{z.delete(t)}),t.o(e)}}function ce(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ae(t){t&&t.c()}function Q(t,e,n){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),K(()=>{const i=t.$$.on_mount.map(he).filter(ge);t.$$.on_destroy?t.$$.on_destroy.push(...i):E(i),t.$$.on_mount=[]}),l.forEach(K)}function W(t,e){const n=t.$$;n.fragment!==null&&(Ee(n.after_update),E(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function xe(t,e){t.$$.dirty[0]===-1&&(B.push(t),Re(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(t,e,n,s,l,i,r=null,f=[-1]){const o=A;L(t);const u=t.$$={fragment:null,ctx:[],props:i,update:P,not_equal:l,bound:le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:le(),dirty:f,skip_bound:!1,root:e.target||o.$$.root};r&&r(u.root);let h=!1;if(u.ctx=n?n(t,e.props||{},(a,b,...y)=>{const _=y.length?y[0]:b;return u.ctx&&l(u.ctx[a],u.ctx[a]=_)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](_),h&&xe(t,a)),b}):[],u.update(),h=!0,E(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const a=ye(e.target);u.fragment&&u.fragment.l(a),a.forEach(O)}else u.fragment&&u.fragment.c();e.intro&&J(t.$$.fragment),Q(t,e.target,e.anchor),pe()}L(o)}class ee{constructor(){U(this,"$$");U(this,"$$set")}$destroy(){W(this,1),this.$destroy=P}$on(e,n){if(!ge(n))return P;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!_e(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Be="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Be);function Fe(t){let e,n,s,l,i,r,f,o,u,h,a,b,y,_;return{c(){e=g("div"),n=g("button"),s=G("Solve"),i=R(),r=g("button"),f=G("Build"),u=R(),h=g("button"),a=G("Play"),c(n,"class",l="btn "+(t[0]==="solve"?"btn-active":"")),c(r,"class",o="btn "+(t[0]==="build"?"btn-active":"")),c(h,"class",b="btn "+(t[0]==="play"?"btn-active":"")),c(e,"class","btn-group")},m(v,w){D(v,e,w),d(e,n),d(n,s),d(e,i),d(e,r),d(r,f),d(e,u),d(e,h),d(h,a),y||(_=[C(n,"click",t[2]),C(r,"click",t[3]),C(h,"click",t[4])],y=!0)},p(v,[w]){w&1&&l!==(l="btn "+(v[0]==="solve"?"btn-active":""))&&c(n,"class",l),w&1&&o!==(o="btn "+(v[0]==="build"?"btn-active":""))&&c(r,"class",o),w&1&&b!==(b="btn "+(v[0]==="play"?"btn-active":""))&&c(h,"class",b)},i:P,o:P,d(v){v&&O(e),y=!1,E(_)}}}function ke(t,e,n){let{mode:s="solve"}=e;const l=$e();function i(u){l("changeMode",u)}const r=()=>i("solve"),f=()=>i("build"),o=()=>i("play");return t.$$set=u=>{"mode"in u&&n(0,s=u.mode)},[s,i,r,f,o]}class Le extends ee{constructor(e){super(),Z(this,e,ke,Fe,Y,{mode:0})}}class X{constructor(e,n){this.RowHints=[],this.ColHints=[],this.longestRowHint=0,this.longestColHint=0,this.rows=e,this.cols=n,this.cells=new Uint8Array(e*n)}index(e,n){return e*this.cols+n}isFilled(e,n){return(this.cells[this.index(e,n)]&1)!==0}isMarked(e,n){return(this.cells[this.index(e,n)]&2)!==0}isRevealed(e,n){return(this.cells[this.index(e,n)]&4)!==0}isGuessedFilled(e,n){return(this.cells[this.index(e,n)]&8)!==0}getCells(){return this.cells}getRowHints(e){return this.RowHints[e]}getColHints(e){return this.ColHints[e]}getLongestRowHintLength(){return this.longestRowHint}getLongestColHintLength(){return this.longestColHint}fillCell(e,n,s){this.cells[this.index(e,n)]=this.cells[this.index(e,n)]&6|(s?1:0)}markCell(e,n,s){this.cells[this.index(e,n)]=s?this.cells[this.index(e,n)]|2:this.cells[this.index(e,n)]&5}revealCell(e,n,s){this.cells[this.index(e,n)]=s?this.cells[this.index(e,n)]|4:this.cells[this.index(e,n)]&3}guessCell(e,n,s){this.cells[this.index(e,n)]=s?this.cells[this.index(e,n)]|8:this.cells[this.index(e,n)]&7,this.revealCell(e,n,!0)}calculateHints(){this.RowHints=Array(this.rows).fill(null).map(()=>[]),this.ColHints=Array(this.cols).fill(null).map(()=>[]),this.longestRowHint=0,this.longestColHint=0;const e=Array(this.cols).fill(0);for(let n=0;n<this.rows;n++){let s=0;for(let l=0;l<this.cols;l++){const i=this.isFilled(n,l);i?s++:s>0&&(this.RowHints[n].push(s),s=0),i?e[l]++:e[l]>0&&(this.ColHints[l].push(e[l]),e[l]=0)}s>0&&this.RowHints[n].push(s),this.RowHints[n].length>this.longestRowHint&&(this.longestRowHint=this.RowHints[n].length)}for(let n=0;n<this.cols;n++)e[n]>0&&this.ColHints[n].push(e[n]),this.ColHints[n].length>this.longestColHint&&(this.longestColHint=this.ColHints[n].length)}toString(){let e=[],n;for(let s=0;s<this.longestColHint;s++){n=" ".repeat(this.longestRowHint*2+1);for(let l=0;l<this.cols;l++){const i=this.ColHints[l];i.length+s>=this.longestColHint?n+=i[s-(this.longestColHint-i.length)].toString()+" "+" ".repeat(l%4===0?0:1):n+="  "}e.push(n)}for(let s=0;s<this.rows;s++){n="";const l=this.RowHints[s];for(let i=0;i<this.longestRowHint;i++)l.length+i>=this.longestRowHint?n+=l[i-(this.longestRowHint-l.length)].toString()+" ":n+="  ";n+="|";for(let i=0;i<this.cols;i++)n+=this.getStringForCell(s,i)+"|";e.push(n)}return e.join(`
`)}getStringForCell(e,n){return this.isRevealed(e,n)?this.isFilled(e,n)?this.isGuessedFilled(e,n)?"⏹":"▦":this.isGuessedFilled(e,n)?"⬚":"⊡":this.isMarked(e,n)?"⊠":"▢"}getCellVisual(e,n){return this.isRevealed(e,n)?this.isFilled(e,n)?this.isGuessedFilled(e,n)?"filled":"filled-incorrect":this.isGuessedFilled(e,n)?"empty-incorrect":"empty":this.isMarked(e,n)?"marked":"empty"}}function fe(t,e,n){const s=t.slice();return s[7]=e[n],s[9]=n,s}function de(t){let e,n,s;function l(){return t[5](t[9])}return{c(){e=g("div"),c(e,"class","border"),F(e,"width",t[2]+"px"),F(e,"height",t[2]+"px"),N(e,"bg-white",t[1]!==t[9]),N(e,"bg-orange-400",t[1]===t[9])},m(i,r){D(i,e,r),n||(s=[C(e,"mouseenter",l),C(e,"mouseleave",t[6])],n=!0)},p(i,r){t=i,r&4&&F(e,"width",t[2]+"px"),r&4&&F(e,"height",t[2]+"px"),r&2&&N(e,"bg-white",t[1]!==t[9]),r&2&&N(e,"bg-orange-400",t[1]===t[9])},d(i){i&&O(e),n=!1,E(s)}}}function Ae(t){let e,n,s,l=ce(t[3]),i=[];for(let r=0;r<l.length;r+=1)i[r]=de(fe(t,l,r));return{c(){e=g("div"),n=g("div"),s=g("div");for(let r=0;r<i.length;r+=1)i[r].c();c(s,"class","grid gap-0 svelte-gdz4ne"),F(s,"grid-template-columns","repeat("+t[0].cols+", "+t[2]+"px)"),c(n,"class","bg-base-200 p-2 overflow-auto flex justify-center"),c(e,"class","p-2")},m(r,f){D(r,e,f),d(e,n),d(n,s);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(s,null)},p(r,[f]){if(f&14){l=ce(r[3]);let o;for(o=0;o<l.length;o+=1){const u=fe(r,l,o);i[o]?i[o].p(u,f):(i[o]=de(u),i[o].c(),i[o].m(s,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=l.length}f&5&&F(s,"grid-template-columns","repeat("+r[0].cols+", "+r[2]+"px)")},i:P,o:P,d(r){r&&O(e),ve(i,r)}}}function Oe(t,e,n){let s,l,i,{PicrossBoard:r}=e,f=null;const o=h=>n(1,f=h),u=()=>n(1,f=null);return t.$$set=h=>{"PicrossBoard"in h&&n(0,r=h.PicrossBoard)},t.$$.update=()=>{t.$$.dirty&1&&n(3,s=r.getCells()),t.$$.dirty&1&&n(4,l=Math.max(r.rows,r.cols)),t.$$.dirty&16&&n(2,i=l<=10?32:l<=20?24:l<=30?20:16)},[r,f,i,s,l,o,u]}class Me extends ee{constructor(e){super(),Z(this,e,Oe,Ae,Y,{PicrossBoard:0})}}function je(t){let e,n,s,l,i,r,f,o,u,h,a,b,y,_,v,w,m,M,te,H,S,T,ne;return s=new Le({props:{mode:t[0]}}),s.$on("changeMode",t[4]),H=new Me({props:{PicrossBoard:t[3]}}),{c(){e=g("main"),n=g("div"),ae(s.$$.fragment),l=R(),i=g("section"),r=g("div"),f=g("div"),o=g("label"),u=g("span"),u.textContent="Rows:",h=R(),a=g("input"),y=R(),_=g("label"),v=g("span"),v.textContent="Cols:",w=R(),m=g("input"),te=R(),ae(H.$$.fragment),c(n,"class","mb-4"),c(u,"class","text-sm font-medium"),c(a,"type","number"),c(a,"min","1"),c(a,"max","50"),c(a,"class","input input-bordered input-sm w-20"),a.disabled=b=t[0]!=="build",c(o,"class","flex items-center gap-2"),c(v,"class","text-sm font-medium"),c(m,"type","number"),c(m,"min","1"),c(m,"max","50"),c(m,"class","input input-bordered input-sm w-20"),m.disabled=M=t[0]!=="build",c(_,"class","flex items-center gap-2"),c(f,"class","flex gap-4 mb-4 items-center justify-center"),c(r,"class","card bg-base-100 shadow p-4"),c(i,"class","container mx-auto flex justify-center"),c(e,"class","p-4 svelte-2rchkd")},m(p,$){D(p,e,$),d(e,n),Q(s,n,null),d(e,l),d(e,i),d(i,r),d(r,f),d(f,o),d(o,u),d(o,h),d(o,a),j(a,t[1]),d(f,y),d(f,_),d(_,v),d(_,w),d(_,m),j(m,t[2]),d(r,te),Q(H,r,null),S=!0,T||(ne=[C(a,"input",t[6]),C(a,"change",t[5]),C(m,"input",t[7]),C(m,"change",t[5])],T=!0)},p(p,[$]){const se={};$&1&&(se.mode=p[0]),s.$set(se),(!S||$&1&&b!==(b=p[0]!=="build"))&&(a.disabled=b),$&2&&I(a.value)!==p[1]&&j(a,p[1]),(!S||$&1&&M!==(M=p[0]!=="build"))&&(m.disabled=M),$&4&&I(m.value)!==p[2]&&j(m,p[2]);const ie={};$&8&&(ie.PicrossBoard=p[3]),H.$set(ie)},i(p){S||(J(s.$$.fragment,p),J(H.$$.fragment,p),S=!0)},o(p){ue(s.$$.fragment,p),ue(H.$$.fragment,p),S=!1},d(p){p&&O(e),W(s),W(H),T=!1,E(ne)}}}function Ne(t,e,n){let s="build",l=10,i=10,r=new X(l,i);function f(a){n(0,s=a.detail)}function o(){s==="build"&&n(3,r=new X(l,i))}function u(){l=I(this.value),n(1,l)}function h(){i=I(this.value),n(2,i)}return[s,l,i,r,f,o,u,h]}class Ge extends ee{constructor(e){super(),Z(this,e,Ne,je,Y,{})}}new Ge({target:document.getElementById("app")});const ze=()=>{let t=new X(5,5);console.log(t.toString()),t.fillCell(0,3,!0),t.fillCell(0,1,!0),t.fillCell(0,2,!0),t.fillCell(1,0,!0),t.fillCell(1,4,!0),t.fillCell(2,0,!0),t.calculateHints(),console.log(t.toString())};ze();
