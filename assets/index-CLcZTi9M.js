var Z=Object.defineProperty;var tt=(e,t,n)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var O=(e,t,n)=>tt(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();function b(){}function W(e){return e()}function q(){return Object.create(null)}function E(e){e.forEach(W)}function X(e){return typeof e=="function"}function z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function et(e){return Object.keys(e).length===0}function d(e,t){e.appendChild(t)}function k(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function nt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function w(e){return document.createTextNode(e)}function L(){return w(" ")}function P(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function st(e){return Array.from(e.childNodes)}function D(e,t){t=""+t,e.data!==t&&(e.data=t)}function K(e,t,n,s){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function it(e,t,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:s})}let R;function x(e){R=e}function lt(){if(!R)throw new Error("Function called outside component initialization");return R}function ot(){const e=lt();return(t,n,{cancelable:s=!1}={})=>{const i=e.$$.callbacks[t];if(i){const l=it(t,n,{cancelable:s});return i.slice().forEach(r=>{r.call(e,l)}),!l.defaultPrevented}return!0}}const y=[],V=[];let H=[];const G=[],rt=Promise.resolve();let F=!1;function ct(){F||(F=!0,rt.then(Y))}function M(e){H.push(e)}const B=new Set;let $=0;function Y(){if($!==0)return;const e=R;do{try{for(;$<y.length;){const t=y[$];$++,x(t),ut(t.$$)}}catch(t){throw y.length=0,$=0,t}for(x(null),y.length=0,$=0;V.length;)V.pop()();for(let t=0;t<H.length;t+=1){const n=H[t];B.has(n)||(B.add(n),n())}H.length=0}while(y.length);for(;G.length;)G.pop()();F=!1,B.clear(),x(e)}function ut(e){if(e.fragment!==null){e.update(),E(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(M)}}function ft(e){const t=[],n=[];H.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),H=t}const A=new Set;let at;function N(e,t){e&&e.i&&(A.delete(e),e.i(t))}function J(e,t,n,s){if(e&&e.o){if(A.has(e))return;A.add(e),at.c.push(()=>{A.delete(e)}),e.o(t)}}function dt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Q(e){e&&e.c()}function j(e,t,n){const{fragment:s,after_update:i}=e.$$;s&&s.m(t,n),M(()=>{const l=e.$$.on_mount.map(W).filter(X);e.$$.on_destroy?e.$$.on_destroy.push(...l):E(l),e.$$.on_mount=[]}),i.forEach(M)}function I(e,t){const n=e.$$;n.fragment!==null&&(ft(n.after_update),E(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(e,t){e.$$.dirty[0]===-1&&(y.push(e),ct(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function T(e,t,n,s,i,l,r=null,u=[-1]){const a=R;x(e);const o=e.$$={fragment:null,ctx:[],props:l,update:b,not_equal:i,bound:q(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:q(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};r&&r(o.root);let h=!1;if(o.ctx=n?n(e,t.props||{},(f,c,...p)=>{const _=p.length?p[0]:c;return o.ctx&&i(o.ctx[f],o.ctx[f]=_)&&(!o.skip_bound&&o.bound[f]&&o.bound[f](_),h&&ht(e,f)),c}):[],o.update(),h=!0,E(o.before_update),o.fragment=s?s(o.ctx):!1,t.target){if(t.hydrate){const f=st(t.target);o.fragment&&o.fragment.l(f),f.forEach(S)}else o.fragment&&o.fragment.c();t.intro&&N(e.$$.fragment),j(e,t.target,t.anchor),Y()}x(a)}class U{constructor(){O(this,"$$");O(this,"$$set")}$destroy(){I(this,1),this.$destroy=b}$on(t,n){if(!X(n))return b;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!et(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const gt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(gt);function mt(e){let t,n,s,i,l,r,u,a,o,h,f,c,p,_;return{c(){t=m("div"),n=m("button"),s=w("Solve"),l=L(),r=m("button"),u=w("Build"),o=L(),h=m("button"),f=w("Play"),g(n,"class",i="btn "+(e[0]==="solve"?"btn-active":"")),g(r,"class",a="btn "+(e[0]==="build"?"btn-active":"")),g(h,"class",c="btn "+(e[0]==="play"?"btn-active":"")),g(t,"class","btn-group")},m(v,C){k(v,t,C),d(t,n),d(n,s),d(t,l),d(t,r),d(r,u),d(t,o),d(t,h),d(h,f),p||(_=[P(n,"click",e[2]),P(r,"click",e[3]),P(h,"click",e[4])],p=!0)},p(v,[C]){C&1&&i!==(i="btn "+(v[0]==="solve"?"btn-active":""))&&g(n,"class",i),C&1&&a!==(a="btn "+(v[0]==="build"?"btn-active":""))&&g(r,"class",a),C&1&&c!==(c="btn "+(v[0]==="play"?"btn-active":""))&&g(h,"class",c)},i:b,o:b,d(v){v&&S(t),p=!1,E(_)}}}function pt(e,t,n){let{mode:s="solve"}=t;const i=ot();function l(o){i("changeMode",o)}const r=()=>l("solve"),u=()=>l("build"),a=()=>l("play");return e.$$set=o=>{"mode"in o&&n(0,s=o.mode)},[s,l,r,u,a]}class _t extends U{constructor(t){super(),T(this,t,pt,mt,z,{mode:0})}}function bt(e,t,n){const s=e.slice();return s[4]=t[n],s[6]=n,s}function vt(e){let t;return{c(){t=m("div"),g(t,"class","w-7 h-7 border bg-white")},m(n,s){k(n,t,s)},p:b,d(n){n&&S(t)}}}function wt(e){let t,n,s,i,l,r,u,a,o,h=dt(e[2]),f=[];for(let c=0;c<h.length;c+=1)f[c]=vt(bt(e,h,c));return{c(){t=m("div"),n=m("div"),s=m("div"),i=w(e[0]),l=w(" x "),r=w(e[1]),u=L(),a=m("div"),o=m("div");for(let c=0;c<f.length;c+=1)f[c].c();g(s,"class","text-sm text-muted"),g(n,"class","flex items-center justify-between mb-2"),g(o,"class","grid gap-0 svelte-gdz4ne"),K(o,"grid-template-columns","repeat("+e[1]+", 1.75rem)"),g(a,"class","bg-base-200 p-2 overflow-auto"),g(t,"class","p-2")},m(c,p){k(c,t,p),d(t,n),d(n,s),d(s,i),d(s,l),d(s,r),d(t,u),d(t,a),d(a,o);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(o,null)},p(c,[p]){p&1&&D(i,c[0]),p&2&&D(r,c[1]),p&2&&K(o,"grid-template-columns","repeat("+c[1]+", 1.75rem)")},i:b,o:b,d(c){c&&S(t),nt(f,c)}}}function $t(e,t,n){let{rows:s=10}=t,{cols:i=10}=t,{mode:l="solve"}=t;const r=Array(s*i).fill(0);return e.$$set=u=>{"rows"in u&&n(0,s=u.rows),"cols"in u&&n(1,i=u.cols),"mode"in u&&n(3,l=u.mode)},[s,i,r,l]}let yt=class extends U{constructor(t){super(),T(this,t,$t,wt,z,{rows:0,cols:1,mode:3})}};function Ht(e){let t,n,s,i,l,r,u,a;return s=new _t({props:{mode:e[0]}}),s.$on("changeMode",e[1]),u=new yt({props:{rows:Ct,cols:xt,mode:e[0]}}),{c(){t=m("main"),n=m("div"),Q(s.$$.fragment),i=L(),l=m("section"),r=m("div"),Q(u.$$.fragment),g(n,"class","mb-4"),g(r,"class","card bg-base-100 shadow p-4"),g(l,"class","container mx-auto"),g(t,"class","p-4 svelte-2rchkd")},m(o,h){k(o,t,h),d(t,n),j(s,n,null),d(t,i),d(t,l),d(l,r),j(u,r,null),a=!0},p(o,[h]){const f={};h&1&&(f.mode=o[0]),s.$set(f);const c={};h&1&&(c.mode=o[0]),u.$set(c)},i(o){a||(N(s.$$.fragment,o),N(u.$$.fragment,o),a=!0)},o(o){J(s.$$.fragment,o),J(u.$$.fragment,o),a=!1},d(o){o&&S(t),I(s),I(u)}}}let Ct=10,xt=10;function Rt(e,t,n){let s="solve";function i(l){n(0,s=l.detail)}return[s,i]}class Et extends U{constructor(t){super(),T(this,t,Rt,Ht,z,{})}}class St{constructor(t,n){this.RowHints=[],this.ColHints=[],this.longestRowHint=0,this.longestColHint=0,this.rows=t,this.cols=n,this.cells=new Uint8Array(t*n)}index(t,n){return t*this.cols+n}isFilled(t,n){return(this.cells[this.index(t,n)]&1)!==0}isMarked(t,n){return(this.cells[this.index(t,n)]&2)!==0}isRevealed(t,n){return(this.cells[this.index(t,n)]&4)!==0}getRowHints(t){return this.RowHints[t]}getColHints(t){return this.ColHints[t]}getLongestRowHintLength(){return this.longestRowHint}getLongestColHintLength(){return this.longestColHint}fillCell(t,n,s){this.cells[this.index(t,n)]=this.cells[this.index(t,n)]&6|(s?1:0)}markCell(t,n,s){this.cells[this.index(t,n)]=s?this.cells[this.index(t,n)]|2:this.cells[this.index(t,n)]&5}revealCell(t,n,s){this.cells[this.index(t,n)]=s?this.cells[this.index(t,n)]|4:this.cells[this.index(t,n)]&3}calculateHints(){this.RowHints=Array(this.rows).fill(null).map(()=>[]),this.ColHints=Array(this.cols).fill(null).map(()=>[]),this.longestRowHint=0,this.longestColHint=0;const t=Array(this.cols).fill(0);for(let n=0;n<this.rows;n++){let s=0;for(let i=0;i<this.cols;i++){const l=this.isFilled(n,i);l?s++:s>0&&(this.RowHints[n].push(s),s=0),l?t[i]++:t[i]>0&&(this.ColHints[i].push(t[i]),t[i]=0)}s>0&&this.RowHints[n].push(s),this.RowHints[n].length>this.longestRowHint&&(this.longestRowHint=this.RowHints[n].length)}for(let n=0;n<this.cols;n++)t[n]>0&&this.ColHints[n].push(t[n]),this.ColHints[n].length>this.longestColHint&&(this.longestColHint=this.ColHints[n].length)}toString(t=!1){let n=[],s;for(let i=0;i<this.longestColHint;i++){s=" ".repeat(this.longestRowHint*2+1);for(let l=0;l<this.cols;l++){const r=this.ColHints[l];r.length+i>=this.longestColHint?s+=r[i-(this.longestColHint-r.length)].toString()+" "+" ".repeat(l%4===0?0:1):s+="  "}n.push(s)}for(let i=0;i<this.rows;i++){s="";const l=this.RowHints[i];for(let r=0;r<this.longestRowHint;r++)l.length+r>=this.longestRowHint?s+=l[r-(this.longestRowHint-l.length)].toString()+" ":s+="  ";s+="|";for(let r=0;r<this.cols;r++)s+=this.getStringForCell(i,r,t)+"|";n.push(s)}return n.join(`
`)}getStringForCell(t,n,s=!1){return this.isRevealed(t,n)||s?this.isFilled(t,n)?"⏹":"⊡":this.isMarked(t,n)?"⊠":"▢"}}new Et({target:document.getElementById("app")});const At=()=>{let e=new St(5,5);console.log(e.toString()),e.fillCell(0,3,!0),e.fillCell(0,1,!0),e.fillCell(0,2,!0),e.fillCell(1,0,!0),e.fillCell(1,4,!0),e.fillCell(2,0,!0),e.calculateHints(),console.log(e.toString(!0))};At();
